<!DOCTYPE html>
<html>
    <head>
        <title>Settings Button</title>
        <meta name="author" content="jbuhacoff">
 <link rel="stylesheet" type="text/css" href="/v1/html5/features/director-html5/mtwilson-core-html5/content/css/jsgrid.css" />
         <link rel="stylesheet" href="/v1/html5/features/director-html5/mtwilson-core-html5/content/css/smart_wizard.css" type="text/css">
              <link rel="stylesheet" href="/v1/html5/features/director-html5/mtwilson-core-html5/content/css/jqueryFileTree.css" type="text/css">
              <link rel="stylesheet" type="text/css" href="/v1/html5/features/director-html5/mtwilson-core-html5/content/css/theme.css" />  

<script src="/v1/html5/features/director-html5/mtwilson-core-html5/content/js/jsgrid.min.js"></script>
	<script src="/v1/html5/features/director-html5/mtwilson-core-html5/content/js/jqueryFileTree.js"></script>
          <script src="/v1/html5/features/director-html5/mtwilson-core-html5/content/js/jquery.easing.js"></script>
	

 <script type="text/javascript">

function fetchKMSSetting() {
	$.ajax({
		type : 'GET',
		url : '/v1/settings/kms/getproperties',
		contentType : "application/json",
		success : function (data) {
			$('#KMS_IP').val(data.kmserverip);
			$('#KMS_PORT').val(data.port);
			$('#KMS_USERNAME').val(data.username);
			$('#KMS_PASSWORD').val(data.password);
			$('#KMS_RSAKEY').val(data.rsakey);
		}
	});
}
function fetchMtwilsonSetting() {
	$.ajax({
		type : 'GET',
		url : '/v1/setting/mtwilson/getproperties',
		contentType : "application/json",
		success : function (data) {
			$('#mtwilsonapiurl').val(data.mtwilson_api_url);
			$('#mtwilsonapiusername').val(data.mtwilson_api_username);
			$('#mtwilsonapipassword').val(data.mtwilson_api_password);
			$('#mtwilsonapicertificate').val(data.mtwilson_api_tls_policy_certificate_sha1);
			$('#mtwilsonserverip').val(data.mtwilson_server);
			$('#mtwilsonserverport').val(data.mtwilson_server_port);
			$('#mtwilsonusername').val(data.mtwilson_username);
			$('#mtwilsonpassword').val(data.mtwilson_password);
		}
	});
}


		function refreshSSHSetting() {
			console.log("HERE 2");
			$("#jsGrid").jsGrid({
				height :"500%",
				width : "100%",
				editing : true,
				inserting : true,
				
				sorting : true,
				paging : true,
				autoload : true,
				pageSize : 10,
				pageButtonCount : 5,
				deleteConfirm : "Do you really want to delete the client?",
				controller : db,
				fields : [ {
					title : "Id",
					name : "id",
					type : "text",
					editing : false,
					inserting : false,
					align : "center",

					width : 75
				}, {
					title : "Name",
					name : "name",
					align : "center",
					type : "text",

					width : 75
				}, {
					title : "IP Address",
					name : "ip_address",
					filtering:true,
					align : "center",

					type : "text",
					width : 75
				}, {
					title : "Username",
					name : "username",
					align : "center",

					type : "text",
					width : 75
				}, {
					title : "Password",
					name : "password",
					type : "text",
					align : "center",

					width : 75
				}, {
					title : "Key",
					name : "key",
					type : "text",
					align : "center",

					width : 75
				}, {
					type : "control"
				} ]
			});
			var delay = 1000; 
				setTimeout(function() {
					$("#jsGrid").show();
					$("#jsGrid").jsGrid("refresh");
				}, delay);


		};


</script>


    </head>
    <body>

<!-- NOTE:  the <ul> is for markup correctness; the navbar feature looks for body ul here and gets the inner html as the button content
so the ul itself is not copied -->
<ul>
<li class="dropdown">
	<a class="dropdown-toggle" role="button" data-toggle="dropdown" href="#">Settings</a>
	<ul id="g-settings-menu" class="dropdown-menu" role="menu">
		<li><a href="#setting_create_ssh" data-toggle="tab" onclick="refreshSSHSetting();" >Ssh Settings</a></li>
		<li><a href="#setting_kms" data-toggle="tab" onclick="fetchKMSSetting()" >KMS Setting</a></li>
		<li><a href="#setting_mtwilson" data-toggle="tab" onclick="fetchMtwilsonSetting()" >Mt Wilson Setting</a></li>
	</ul>                
</li>
</ul>

    </body>
</html>
