<!DOCTYPE html>
<html>
    <head>
        <title>Dashboard</title>
        <meta name="author" content="jbuhacoff">
    </head>
    <body>


        <div class="row">
     <h3>Yet to be implemented</h3>


        </div>     



        <!--
        <section data-bind="with: searchCriteria">
            <h1>search keys</h1>
            <form id="searchKeysForm">
                <fieldset>
                    <legend>Search Keys</legend>
                    <p>Submit this form to search for existing keys.</p>
                    <input type="text" data-bind="value: id" placeholder="key id"/>
                    <input type="text" data-bind="value: name" placeholder="key name"/>
                    <input type="text" data-bind="value: role" placeholder="key role (ex. key-encryption)"/>
                    <input type="text" data-bind="value: algorithm" placeholder="algorithm (ex. DES, DES3, AES)"/>
                    <input type="text" data-bind="value: key_length" placeholder="key length (ex. 128, 192, 256)"/>
                    <input type="text" data-bind="value: cipher_mode" placeholder="cipher mode (ex. ECB, CBC, OFB)"/>
                    <input type="text" data-bind="value: padding_mode" placeholder="padding mode"/>
                    <input type="text" data-bind="value: digest_algorithm" placeholder="digest algorithm (ex. SHA-256)"/>
                    <input type="text" data-bind="value: transfer_policy" placeholder="key transfer policy"/>
                    <input type="hidden" data-bind="value: offset" value="0"/>
                    <input type="hidden" data-bind="value: limit" value="25"/>
                    <input type="submit" value="Submit" data-bind="click: $parent.searchKeys"/>
                </fieldset>
            </form>
        </section>
        -->


        <div class="modal" id="addKeyModalDialog" data-bind="with: keysViewModel">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
                        <h4 class="modal-title">Add Key</h4>
                    </div>
                    <div class="modal-body">

                        <!--tabs-->
                        <div class="container">
                            <div class="col-md-4">
                                <ul class="nav nav-tabs" id="createKeyModalTabs">
                                    <li class="active"><a href="#createKeyTab" data-toggle="tab">Create New Key</a></li>
                                    <li><a href="#registerKeyTab" data-toggle="tab">Register Existing Key</a></li>
                                </ul>

                                <div class="tab-content">
                                    <div class="tab-pane active" id="createKeyTab">
                                        <form id="createKeyForm"  data-bind="with: createKeyRequest">
                                            <fieldset>
                                                <p>Submit this form to request the server to create a new key.</p>
                                                <input type="text" placeholder="key id will be generated" value="" disabled/> <!-- data-bind="value: id"  -->
                                                <input type="text" data-bind="value: name" placeholder="key name" value="key name"/>
                                                <input type="text" data-bind="value: algorithm" placeholder="algorithm" value="AES"/>
                                                <input type="text" data-bind="value: key_length" placeholder="key length" value="128"/>
                                                <input type="text" data-bind="value: cipher_mode" placeholder="cipher mode" value="OFB"/>
                                                <input type="text" data-bind="value: padding_mode" placeholder="padding mode" value=""/>
                                                <input type="text" data-bind="value: digest_algorithm" placeholder="digest algorithm" value="SHA-256"/>
                                                <input type="text" data-bind="value: transfer_policy" placeholder="key transfer policy" value=""/>
                                                <input style="margin-top: 5px;" type="submit" value="Submit" class="btn btn-primary" data-bind="click: $parent.createKey"/>
                                            </fieldset>
                                        </form>
                                    </div>
                                    <div class="tab-pane" id="registerKeyTab">
                                        <form id="registerKeyForm" data-bind="with: registerKeyRequest">
                                            <fieldset>
                                                <p>Submit this form to register an existing key with the server.</p>
                                                <!-- 
                                                data-bind="value: id"
                                                data-bind="value: name" 
                                                
                                                data-bind="value: transfer_policy"
                                                <input type="text" placeholder="key id"/>
                                                <input type="text" placeholder="key name"/>
                                                <input type="text"  placeholder="key transfer policy" value=""/>
                                                -->
                                                <textarea data-bind="value: key_pem" cols="80" rows="10" placeholder="Paste the existing key here, in PEM format"></textarea>
                                                <br>
                                                <input type="submit" value="Submit" class="btn btn-primary" data-bind="click: $parent.registerKey"/>
                                            </fieldset>
                                        </form>
                                    </div>
                                </div>
                            </div>
                        </div>  

                        <!--/tabs-->          

                    </div>
                    <div class="modal-footer">
                        <a href="#" data-dismiss="modal" class="btn">Close</a>
                    </div>
                </div><!-- /.modal-content -->
            </div><!-- /.modal-dialog -->
        </div><!-- /.modal -->

        <div class="modal" id="deleteKeyModalDialog" data-bind="with: keysViewModel">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
                        <h4 class="modal-title">Delete Key</h4>
                    </div>
                    <div class="modal-body">        
                        <form id="deleteKeyForm" data-bind="with: deleteKeyRequest">
                            <fieldset>
                                <p>Submit this form to request the server to delete an existing key.</p>
                                <input type="text" name="id" data-bind="value: id" placeholder="Required key id" value="" disabled/> 
                                <input type="text" name="algorithm" data-bind="value: algorithm" placeholder="algorithm" value="" disabled/>
                                <input type="text" name="key_length" data-bind="value: key_length" placeholder="key length" value="" disabled/>
                                <input type="text" name="cipher_mode" data-bind="value: cipher_mode" placeholder="cipher mode" value="" disabled/>
                                <input type="text" name="padding_mode" data-bind="value: padding_mode" placeholder="padding mode" value="" disabled/>
                                <input type="text" name="digest_algorithm" data-bind="value: digest_algorithm" placeholder="digest algorithm" value="" disabled/>
                                <input type="text" name="transfer_policy" data-bind="value: transfer_policy" placeholder="key transfer policy" value="" disabled/>
                                <br>
                                <input type="submit" class="btn btn-primary"  value="Delete" data-bind="click: $parent.deleteKey" />
                            </fieldset>
                        </form>
                    </div>
                    <div class="modal-footer">
                        <a href="#" data-dismiss="modal" class="btn">Close</a>
                    </div>
                </div>
            </div>
        </div>
        <!--
        <section data-bind="with: viewKeyRequest, visible: viewKeyRequest().id">
            <h1>view key</h1>
            <form id="viewKeyForm" >
                <fieldset>
                    <legend>View Key</legend>
                    <p>Cannot change properties of an existing key.</p>
                    <input type="text" name="id" data-bind="value: id" placeholder="Required key id" value="" disabled/> 
                    <input type="text" name="algorithm" data-bind="value: algorithm" placeholder="algorithm" value="" disabled/>
                    <input type="text" name="key_length" data-bind="value: key_length" placeholder="key length" value="" disabled/>
                    <input type="text" name="cipher_mode" data-bind="value: cipher_mode" placeholder="cipher mode" value="" disabled/>
                    <input type="text" name="padding_mode" data-bind="value: padding_mode" placeholder="padding mode" value="" disabled/>
                    <input type="text" name="digest_algorithm" data-bind="value: digest_algorithm" placeholder="digest algorithm" value="" disabled/>
                    <input type="text" name="transfer_policy" data-bind="value: transfer_policy" placeholder="key transfer policy" value="" disabled/>
                    <input type="submit" value="Close" data-bind="click: $parent.closeViewKey" />
                </fieldset>
            </form>
        </section>
        -->
        <!-- <button data-bind="click: submitKeyDeleteForm">Delete</button> -->


        <!-- Placed at the end of the document so the pages load faster -->


        <script type="text/javascript">

            console.log("dashboard.html script");
            resourceLoader.loadJS(['js/knockout.js', 'js/jquery.js', 'js/kms_keys.js'], function() { 
                console.log("dashboard.html: loaded scripts");
            // add our view models to the main view model defined by index.html
                mainViewModel.keysViewModel =  new KeyListViewModel();
                ko.applyBindings(mainViewModel, document.getElementById("dashboard"));
                mainViewModel.keysViewModel.searchKeys({});
            });


        </script>

    </body>
</html>
